<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Lluvia Gigante de Amor</title>
  <style>
    body { margin: 0; background: black; overflow: hidden; cursor: none; touch-action: manipulation; }
    canvas { display: block; position: absolute; top: 0; left: 0; z-index: 1; }
    .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; display: flex; align-items: center; justify-content: center; flex-direction: column; pointer-events: none; }
    .center-message { font-family: 'Courier New', monospace; color: #ff69b4; font-size: 6rem; text-align: center; opacity: 0.8; text-shadow: 0 0 10px rgba(255, 105, 180, 0.7); animation: pulse 3s infinite; margin-bottom: 16px; pointer-events: auto; cursor: pointer; z-index: 3;}
    @media (max-width: 768px) { .center-message { font-size: 3rem; }}
    .extra-message { font-family: 'Courier New', monospace; color: #fff0f5; background: rgba(255, 105, 180, 0.17); border-radius: 10px; margin: 0 auto; padding: 12px 16px; width: 85vw; max-width: 350px; text-align: center; font-size: 1.07rem; line-height: 1.25; box-shadow: 0 0 10px #ff69b4; z-index: 3; opacity: 0.98; word-break: break-word;}
    .heart-cursor { position: absolute; width: 32px; height: 32px; z-index: 9999; pointer-events: none; transition: transform 0.1s ease; filter: drop-shadow(0 0 4px #ff69b4);}
    @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.8;} 50% { transform: scale(1.05); opacity: 1;}}
  </style>
</head>
<body>
<audio id="audio-control" src="https://drive.google.com/uc?export=download&id=1SdgPkeMpWTn4_seVXe1WeRXb9XtwZPyH" loop style="display:none"></audio>
<canvas id="canvas"></canvas>
<div class="overlay">
  <div class="center-message" id="center-message">
    FELIZ CUMPLEA√ëOS MI VIDAüíñ
  </div>
  <div class="extra-message">
    Mi amor es una pena no estar a tu lado en un d√≠a tan especial como este pero quiero que estes feliz, divi√©rtete mucho con tu familia.<br> 
    Te amo enserio y no sabes cu√°nto lo hago, quiero que este d√≠a estes feliz aunque no sea conmigo pero te dar√© tu regalo en persona s√≠, lo prometo preciosa, te quiero y amo much√≠simo MI ESPOSITAAA ü•∫‚ù§Ô∏è
  </div>
</div>
<img id="cursor" class="heart-cursor" src="data:image/svg+xml;base64,PHN2ZyB4bG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0icmVkIiB2aWV3Qm94PSIwIDAgMzAgMzAiPjxnPjxwYXRoIGQ9Ik0yNSA4Yy0yLTUtNy02LTktMS0xLTIuOC0zLTUuMy01LTguMyAyLjUgMi42IDQgNS41IDUgOC41LTEuNS02LjUtOS40LTYuNS0xMSAwLTQuNSA5LjYtNS4xIDEyLjQgMCAwIDAuOCAwLjcgIBoiLz48L2c+PC9zdmc+" />
<script>
// Audio: volumen medio y repetido, reproduce en el primer toque/click
document.addEventListener('DOMContentLoaded', function() {
  const audio = document.getElementById('audio-control');
  audio.volume = 0.5; // volumen medio
  function playAudio() {
    audio.play().catch(()=>{});
    document.body.removeEventListener('click', playAudio);
    document.body.removeEventListener('touchstart', playAudio);
  }
  document.body.addEventListener('click', playAudio, { once:true });
  document.body.addEventListener('touchstart', playAudio, { once:true });
});

// Efectos: lluvia de "TE AMO", corazones, fuegos artificiales, cursor
const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
const colors = ['#ff69b4', '#ff1493', '#ffa07a', '#ffc0cb', '#db7093', '#ffb6c1', '#ffffe0', '#ffe4e1'];
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const cursor = document.getElementById('cursor');
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

if (isTouchDevice) {
  cursor.style.display = 'none';
} else {
  document.addEventListener('mousemove', (e) => {
    cursor.style.left = `${e.clientX - 16}px`;
    cursor.style.top = `${e.clientY - 16}px`;
    cursor.style.transform = `scale(${1 + Math.sin(Date.now()/300)*0.05})`;
  });
  document.addEventListener('mousedown', () => {
    cursor.style.transform = 'scale(0.8)';
  });
  document.addEventListener('mouseup', () => {
    cursor.style.transform = 'scale(1.1)';
    setTimeout(() => { cursor.style.transform = 'scale(1)'; }, 100);
  });
}

const matrixText = "TE AMO";
const baseFontSize = isTouchDevice ? 36 : 64;
let matrixColumns = Math.floor(window.innerWidth / (baseFontSize * 1.5));
let drops = new Array(matrixColumns).fill(1);

function drawMatrix() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.06)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#ff69b4";
  ctx.font = `bold ${baseFontSize}px monospace`;
  for (let i = 0; i < drops.length; i++) {
    const x = i * baseFontSize * 1.5;
    const y = drops[i] * baseFontSize;
    ctx.shadowColor = "rgba(255, 105, 180, 0.7)";
    ctx.shadowBlur = 12;
    ctx.fillText(matrixText, x, y);
    ctx.strokeStyle = "rgba(255, 255, 255, 0.35)";
    ctx.lineWidth = 2;
    ctx.strokeText(matrixText, x, y);
    ctx.shadowBlur = 0;
    if (y > canvas.height && Math.random() > 0.992) drops[i] = 0;
    drops[i] += 0.3;
  }
}

// Corazones que suben
const hearts = [];
function createHeart() {
  hearts.push({
    x: Math.random() * canvas.width,
    y: canvas.height + 20,
    size: 24 + Math.random() * 20,
    speed: 1 + Math.random() * 1.5,
    opacity: 0.5 + Math.random() * 0.5
  });
}
function drawHearts() {
  for (let i = hearts.length-1; i>=0; i--) {
    const h = hearts[i];
    ctx.globalAlpha = h.opacity;
    ctx.font = `${h.size}px monospace`;
    ctx.fillStyle = '#ff69b4';
    ctx.fillText("‚ù§", h.x, h.y);
    h.y -= h.speed;
    if (h.y < -50) hearts.splice(i, 1);
  }
  ctx.globalAlpha = 1;
}

// Fuegos artificiales
const fireworks = [];
function createExplosion(x, y) {
  const count = 28 + Math.floor(Math.random() * 28);
  for (let i = 0; i < count; i++) {
    const angle = (Math.PI * 2 * i) / count;
    const speed = Math.random() * 4 + 2;
    fireworks.push({
      x, y,
      dx: Math.cos(angle) * speed,
      dy: Math.sin(angle) * speed,
      alpha: 1,
      color: colors[Math.floor(Math.random() * colors.length)],
      text: "TE AMO",
      size: 22 + Math.random() * 20
    });
  }
}
function createFirework() {
  const count = 16 + Math.floor(Math.random() * 24);
  const x = Math.random() * canvas.width;
  const y = Math.random() * canvas.height / 2;
  for (let i = 0; i < count; i++) {
    const angle = (Math.PI * 2 * i) / count;
    const speed = Math.random() * 3 + 2;
    fireworks.push({
      x, y,
      dx: Math.cos(angle) * speed,
      dy: Math.sin(angle) * speed,
      alpha: 1,
      color: colors[Math.floor(Math.random() * colors.length)],
      size: 3 + Math.random() * 3
    });
  }
}
function drawFireworks() {
  for (let i = fireworks.length-1; i>=0; i--) {
    const p = fireworks[i];
    ctx.globalAlpha = p.alpha;
    ctx.fillStyle = p.color;
    if (p.text) {
      ctx.font = `bold ${p.size}px monospace`;
      ctx.fillText(p.text, p.x, p.y);
    } else {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size/2, 0, Math.PI * 2);
      ctx.fill();
    }
    p.x += p.dx; p.y += p.dy;
    p.alpha -= 0.02;
    if (p.alpha <= 0) fireworks.splice(i, 1);
  }
  ctx.globalAlpha = 1;
}

// Part√≠culas de explosi√≥n
const particles = [];
function handleInteraction(x, y) {
  createExplosion(x, y);
  const directions = [
    {x: 0, y: -1},{x: 0, y: 1},{x: -1, y: 0},{x: 1, y: 0}
  ];
  directions.forEach(dir => {
    particles.push({
      x: x, y: y,
      vx: dir.x * (2.8 + Math.random() * 2),
      vy: dir.y * (2.8 + Math.random() * 2),
      alpha: 1,
      size: baseFontSize + Math.random() * 30,
      color: `#${Math.random() > 0.5 ? 'ff69b4' : 'ff007f'}`
    });
  });
  for (let i = 0; i < 12; i++) {
    particles.push({
      x: x, y: y,
      vx: (Math.random() - 0.5) * 6,
      vy: (Math.random() - 0.5) * 6,
      alpha: 1,
      size: baseFontSize + Math.random() * 22,
      color: `#${Math.random() > 0.5 ? 'ff69b4' : 'ff007f'}`
    });
  }
}
canvas.addEventListener(isTouchDevice ? 'touchstart' : 'click', function(e) {
  let x, y;
  if (isTouchDevice) { x = e.touches[0].clientX; y = e.touches[0].clientY; }
  else { x = e.clientX; y = e.clientY; }
  handleInteraction(x, y);
});
const centerMsg = document.getElementById('center-message');
centerMsg.addEventListener(isTouchDevice ? 'touchstart' : 'click', function(e) {
  const rect = centerMsg.getBoundingClientRect();
  const x = rect.left + rect.width/2 + window.scrollX;
  const y = rect.top + rect.height/2 + window.scrollY;
  handleInteraction(x, y);
  e.preventDefault();
  e.stopPropagation();
});

function drawParticles() {
  for (let i = particles.length-1; i>=0; i--) {
    const p = particles[i];
    ctx.globalAlpha = p.alpha;
    ctx.font = `bold ${p.size}px monospace`;
    ctx.fillStyle = p.color;
    ctx.shadowColor = p.color;
    ctx.shadowBlur = 17;
    ctx.fillText("TE AMO", p.x, p.y);
    ctx.shadowBlur = 0;
    p.x += p.vx;
    p.y += p.vy;
    p.alpha -= 0.011;
    if (p.alpha <= 0) particles.splice(i, 1);
  }
  ctx.globalAlpha = 1;
}

function animate() {
  drawMatrix();
  drawParticles();
  drawHearts();
  drawFireworks();
  if (Math.random() > 0.94) createHeart();
  if (Math.random() > 0.98) createFirework();
  requestAnimationFrame(animate);
}
animate();

window.addEventListener('resize', () => {
  // Ajustar columnas y drops de Matrix
  matrixColumns = Math.floor(window.innerWidth / (baseFontSize * 1.5));
  drops = new Array(matrixColumns).fill(1);
  resizeCanvas();
});
</script>
</body>
</html>